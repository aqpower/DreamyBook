---
creation date: 2023-03-18 15:08 
---
 [[2023-03-18-æ˜ŸæœŸå…­]]  [[æœ€çŸ­è·¯å¾„]] #ğŸŒ²é•¿é’  #ç®—æ³• #å›¾è®º

## é¢˜ç›®
æœ¬é¢˜æ˜¯ä¸€éƒ¨æˆ˜äº‰å¤§ç‰‡ â€”â€” ä½ éœ€è¦ä»å·±æ–¹å¤§æœ¬è¥å‡ºå‘ï¼Œä¸€è·¯æ”»åŸç•¥åœ°æ€åˆ°æ•Œæ–¹å¤§æœ¬è¥ã€‚é¦–å…ˆæ—¶é—´å°±æ˜¯ç”Ÿå‘½ï¼Œæ‰€ä»¥ä½ å¿…é¡»é€‰æ‹©åˆé€‚çš„è·¯å¾„ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦å é¢†æ•Œæ–¹å¤§æœ¬è¥ã€‚å½“è¿™æ ·çš„è·¯å¾„ä¸å”¯ä¸€æ—¶ï¼Œè¦æ±‚é€‰æ‹©å¯ä»¥æ²¿é€”è§£æ”¾æœ€å¤šåŸé•‡çš„è·¯å¾„ã€‚è‹¥è¿™æ ·çš„è·¯å¾„ä¹Ÿä¸å”¯ä¸€ï¼Œåˆ™é€‰æ‹©å¯ä»¥æœ‰æ•ˆæ€ä¼¤æœ€å¤šæ•Œå†›çš„è·¯å¾„ã€‚
### è¾“å…¥æ ¼å¼ï¼š
è¾“å…¥ç¬¬ä¸€è¡Œç»™å‡º 2 ä¸ªæ­£æ•´æ•° Nï¼ˆ2Â â‰¤Â NÂ â‰¤Â 200ï¼ŒåŸé•‡æ€»æ•°ï¼‰å’Œ Kï¼ˆåŸé•‡é—´é“è·¯æ¡æ•°ï¼‰ï¼Œä»¥åŠå·±æ–¹å¤§æœ¬è¥å’Œæ•Œæ–¹å¤§æœ¬è¥çš„ä»£å·ã€‚éšå N-1 è¡Œï¼Œæ¯è¡Œç»™å‡ºé™¤äº†å·±æ–¹å¤§æœ¬è¥å¤–çš„ä¸€ä¸ªåŸé•‡çš„ä»£å·å’Œé©»å®ˆçš„æ•Œå†›æ•°é‡ï¼Œå…¶é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚å†åé¢æœ‰ K è¡Œï¼Œæ¯è¡ŒæŒ‰æ ¼å¼`åŸé•‡1 åŸé•‡2 è·ç¦»`ç»™å‡ºä¸¤ä¸ªåŸé•‡ä¹‹é—´é“è·¯çš„é•¿åº¦ã€‚è¿™é‡Œè®¾æ¯ä¸ªåŸé•‡ï¼ˆåŒ…æ‹¬åŒæ–¹å¤§æœ¬è¥ï¼‰çš„ä»£å·æ˜¯ç”± 3 ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ã€‚
### è¾“å‡ºæ ¼å¼ï¼š
æŒ‰ç…§é¢˜ç›®è¦æ±‚æ‰¾åˆ°æœ€åˆé€‚çš„è¿›æ”»è·¯å¾„ï¼ˆé¢˜ç›®ä¿è¯é€Ÿåº¦æœ€å¿«ã€è§£æ”¾æœ€å¤šã€æ€ä¼¤æœ€å¼ºçš„è·¯å¾„æ˜¯å”¯ä¸€çš„ï¼‰ï¼Œå¹¶åœ¨ç¬¬ä¸€è¡ŒæŒ‰ç…§æ ¼å¼`å·±æ–¹å¤§æœ¬è¥->åŸé•‡1->...->æ•Œæ–¹å¤§æœ¬è¥`è¾“å‡ºã€‚ç¬¬äºŒè¡Œé¡ºåºè¾“å‡ºæœ€å¿«è¿›æ”»è·¯å¾„çš„æ¡æ•°ã€æœ€çŸ­è¿›æ”»è·ç¦»ã€æ­¼æ•Œæ€»æ•°ï¼Œå…¶é—´ä»¥ 1 ä¸ªç©ºæ ¼åˆ†éš”ï¼Œè¡Œé¦–å°¾ä¸å¾—æœ‰å¤šä½™ç©ºæ ¼ã€‚

### è¾“å…¥æ ·ä¾‹ï¼š

```in
10 12 PAT DBY
DBY 100
PTA 20
PDS 90
PMS 40
TAP 50
ATP 200
LNN 80
LAO 30
LON 70
PAT PTA 10
PAT PMS 10
PAT ATP 20
PAT LNN 10
LNN LAO 10
LAO LON 10
LON DBY 10
PMS TAP 10
TAP DBY 10
DBY PDS 10
PDS PTA 10
DBY ATP 10
```

### è¾“å‡ºæ ·ä¾‹ï¼š

```out
PAT->PTA->PDS->DBY
3 30 210
```

## AC ä»£ç 
```cpp
#include <algorithm>
#include <cmath>
#include <functional>
#include <map>
#include <iostream>
#include <map>
#include <queue>
#include <set>
#include <stack>
#include <string>
#include <vector>

using namespace std;

typedef long long LL;
typedef pair<int, int> P;
const int maxn = 205;

map<string, int> si;
map<int, string> is;
int n, k;
string home, tar;
int w[maxn];
vector<P> adj[maxn];
vector<int> pre[maxn];

bool vis[maxn];
int d[maxn];
void dijkstra(int s) {
    for (int i = 0; i < n; i++) {
        d[i] = 1e9;
    }
    // !!!
    priority_queue<P, vector<P>, greater<P>> qu;
    d[s] = 0;
    qu.push(P{0, s});
    while (!qu.empty()) {
        P top = qu.top();
        int u = top.second;
        qu.pop();
        if (vis[top.second]) {
            continue;
        }
        vis[u] = true;
        for (auto to : adj[u]) {
            int v = to.first;
            int w = to.second;
            if (!vis[v] &&  d[u] + w < d[v]) {
                d[v] = d[u] + w;
                pre[v].clear();
                pre[v].push_back(u);
                qu.push(P{d[v], v});
            } else if (d[u] + w == d[v]) {
                pre[v].push_back(u);
            }
        }
    }
}

int numpath = 0;
vector<int> nv, anspath;
int maxnum = -1, maxatt = -1;
void dfs(int now) {
    if (now == si[home]) {
        numpath++;
        int nowarr = 0, numcity = 0;
        for (int i = 0; i < nv.size(); i++) {
            nowarr += w[nv[i]];
            numcity++;
        }
        if (numcity > maxnum) {
            maxnum = numcity;
            maxatt = nowarr;
            anspath = nv;
        } else if (numcity == maxnum) {
            if (nowarr > maxatt) {
                maxatt = nowarr;
                anspath = nv;
            }
        }
        return;
    }
    for (int i = 0; i < pre[now].size(); i++) {
        nv.push_back(pre[now][i]);
        dfs(pre[now][i]);
        nv.pop_back();
    }
}

int main() {
    cin.tie(0)->ios::sync_with_stdio(false);
    cin >> n >> k >> home >> tar;
    si[home] = 0;
    is[0] = home;
    string t;
    int tnum;
    for (int i = 1; i < n; i++) {
        cin >> t >> tnum;
        si[t] = i;
        is[i] = t;
        w[i] = tnum;
    }
    string a, b;
    for (int i = 0; i < k; i++) {
        cin >> a >> b >> tnum;
        adj[si[a]].push_back(P{si[b], tnum});
        adj[si[b]].push_back(P{si[a], tnum});
    }
    dijkstra(0);
    nv.push_back(si[tar]);
    dfs(si[tar]);
    for (int i = anspath.size() - 1; i >= 0; i--) {
        cout << is[anspath[i]];
        if(i) cout << "->";
    }
    cout << '\n';
    cout << numpath << ' ' << d[si[tar]] << ' ' << maxatt;
    
    return 0;
}

```

## å®è·µå‡ºçœŸçŸ¥
å˜é‡å‘½åå°¤å…¶åœ¨å›¾ç®—æ³•é‡Œé¢æ²¡æœ‰å¿…è¦å¤ªç¹çï¼Œå¸¸ç”¨çš„å˜é‡åå¯ä»¥æ˜¯ u v w a b eã€‚adj æ›¿æ¢æˆ e å°±å¾ˆä¸é”™ï¼Œæ¯æ¬¡å–å †é¡¶åˆ«ç”¨ top å˜é‡ï¼Œä»£ç çœ‹èµ·æ¥ä¼šå¾ˆç¹çä¸å®¹æ˜“æ‰¾é”™ã€‚

**ä¼˜å…ˆé˜Ÿåˆ—**çš„å®šä¹‰å¾ˆå®¹æ˜“å¿½ç•¥**è¦æ„é€ æˆå°æ ¹å †**ï¼Œå³å †é¡¶çš„å…ƒç´ åº”å½“æ˜¯è·ç¦»æœ€å°çš„ã€‚æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯é‡è½½å…ƒç´ çš„å°äºå·ï¼Œç¬¬äºŒä¸ªæ˜¯è‡ªå®šä¹‰æ¯”è¾ƒå®¹å™¨
>  `priority_queue<P, vector<P>, greater<P>> qu;`

ä¸ºäº†èŠ‚çœå®è·µä¸ªäººæ›´å€¾å‘ä¸ç¬¬äºŒç§ï¼Œç¬¬ä¸€ç§ä¸€èˆ¬æ˜¯åœ¨è‡ªå®šä¹‰ç»“æ„ä½“æ—¶ä½¿ç”¨ï¼Œå˜é‡å‘½åæ›´åŠ æ¸…æ™°æ˜“æ‡‚ï¼Œè¯¦ç»†å¯è§ [[STL å®¹å™¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°]] ã€‚

å½“éœ€è¦==è·å¾—å…·ä½“è·¯å¾„çš„æ—¶å€™æˆ–è€…ç»“åˆæœ‰ç‚¹æƒé‡==çš„æ—¶å€™ï¼Œä¸ªäººå–œæ¬¢çš„æ–¹æ³•ï¼šæ±‚æœ€çŸ­è·¯å¾„ä¼˜åŒ–æœç´¢çš„åŒæ—¶**è®°å½•ä¸‹æ¯ä¸ªèŠ‚ç‚¹çš„ pre å€¼**ï¼Œå³æœ€çŸ­è·¯å¾„æƒ…å†µä¸‹å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªèŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

![[Dijkstra + DFS]]

