---
creation date: 2023-05-12 16:55 
---
 [[2023-05-12-星期五]]  #🌱发芽

## AI 幻觉
向量数据库为大模型提供记忆，是大模型应用的刚需工具。在大模型应用中，不断涌现的 B 端对专用数据的需求、C 端对个性化与自动化的需求，带来给大模型增加记忆功能的刚性需求。向量数据库因为可以为大模型提供记忆而需求倍增，AutoGPT 更是把对向量数据库需求量推到了更高的水平。
![image.png](https://jgox-image-1316409677.cos.ap-guangzhou.myqcloud.com/blog/20230517120816.png)
![image.png](https://jgox-image-1316409677.cos.ap-guangzhou.myqcloud.com/blog/20230517120846.png)


## 什么是Embedding
[一文读懂Embedding的概念，以及它和深度学习的关系 - 知乎](https://zhuanlan.zhihu.com/p/164502624)
[OpenAI API](https://platform.openai.com/docs/guides/embeddings/what-are-embeddings)
## vector DB
[Notion – The all-in-one workspace for your notes, tasks, wikis, and databases.](https://three-recorder-52a.notion.site/Vector-DB-5-4-9eeba4eee3b44ec5adca20a119e60b1e)
[对话 Zilliz 星爵 ：向量数据库是大模型的「记忆体」 | 极客公园](https://www.geekpark.net/news/318834)
[微信公众平台](https://mp.weixin.qq.com/s?__biz=Mzg5Mjc3MjIyMA==&mid=2247562255&idx=1&sn=da1ce83ec9b5812611b4e219f7ffe676&chksm=c03abe1cf74d370a5191a77d52a94610d2f4634afb52a5ad75a7b535099ae962a648a918694a&mpshare=1&scene=2&srcid=0512RuXpKGo6eMikJmZJdI8Z&sharer_sharetime=1683854973415&sharer_shareid=3cef39543c713ee7db5e83554569687b#rd)
[向量数据库介绍 - 知乎](https://zhuanlan.zhihu.com/p/40487710)

这段话的意思是：简而言之，向量数据库通过解决独立向量索引的局限性，如可扩展性挑战、繁琐的集成过程、缺乏实时更新和内置安全措施等，为处理向量嵌入提供了一个更优的解决方案，确保了一个更有效和流畅的数据管理体验。

我可以尝试用我的话来翻译这段话：

简单来说，向量数据库比单独的向量索引更好，因为它可以解决单独的向量索引的一些问题，比如扩展不了、集成很麻烦、不能实时更新、没有安全功能等，这样可以让处理向量嵌入更方便和快捷。

在传统的数据库中，我们通常是查询数据库中的行，其中的值通常与我们的查询完全匹配。在向量数据库中，我们使用一个相似性度量来找到与我们的查询最相似的向量。

向量数据库用了一些不同的算法，它们都做了近似最近邻（ANN）搜索。这些算法用哈希、量化或图搜索的方法来让搜索更快。😊

这些算法组成了一个管道，它可以快速准确地检索出查询向量的邻居。由于向量数据库提供的是近似结果，我们考虑的主要权衡是准确性和速度之间的权衡。结果越准确，查询就越慢。但是，一个好的系统可以提供超快的搜索，同时保持近乎完美的准确性。

向量数据库的一个常见的管道如下：

1.  索引：向量数据库使用一种算法（如PQ、LSH或HNSW，下面会详细介绍）对向量进行索引。这一步将向量映射到一个可以加快搜索的数据结构中。
2.  查询：向量数据库将索引后的查询向量与数据集中的索引向量进行比较，找到最近的邻居（应用该索引使用的相似性度量）。
3.  后处理：在某些情况下，向量数据库从数据集中检索出最终的最近邻居，并对它们进行后处理，返回最终结果。这一步可以包括使用不同的相似性度量对最近邻居进行重新排序。在以下部分，我们将更详细地讨论每种算法，并解释它们如何影响向量数据库的整体性能。

查询是指向向量数据库发送一个向量，然后让它找到数据集中与这个向量最相似的向量。最相似的向量就是最近的邻居，也就是在向量空间中距离最小的向量。距离可以用不同的方式来计算，比如余弦相似度、欧几里得距离等。查询的结果是一个按照与查询向量相似性得分排序的向量列表，你可以从这个列表中选择你想要的结果。

例如，假设你有一个图像数据库，每个图像都被转换成了一个向量。你想要找到与一张给定图像最相似的图像，你就可以把这张图像也转换成一个向量，然后作为查询向量发送给向量数据库。向量数据库会在图像数据库中找到与这个查询向量最相似的向量，也就是最近的邻居，然后返回给你一个按照相似性得分排序的图像列表。你可以从这个列表中选择你想要的图像。

## 苏格拉底
当然可以。向量数据库是一种用来存储、检索和分析向量的数据库。它提供标准的 SQL 访问接口，降低用户的使用门槛，并提供高效的数据组织、检索和分析能力。一般用户在存储和检索向量的同时，还需要管理结构化的数据，即支持传统数据库对结构化数据的管理能力。

1. 它从哪里来？向量数据库的产生是为了解决非结构化数据（如文档、图片、视频、音频等信息数据）的存储和管理问题。随着互联网的发展，非结构化数据变得越来越普遍，而传统的关系数据库并不适合存储这类数据。因此，向量数据库应运而生，旨在通过机器学习模型传递非结构化数据而生成嵌入向量，从而实现对非结构化数据的存储、索引和查询。

2. 它是什么？向量数据库是一种新型技术，旨在存储、管理和搜索嵌入向量。它正在越来越多的应用中使用，包括但不限于图像搜索、推荐系统、文本理解、视频摘要、药物发现、股票市场分析等等。它通过机器学习模型将非结构化数据转换为数值列表或向量，这些向量具有足够的高级信息以适用于各种任务。此外，它还支持跨向量搜索，即最近邻搜索或 NN 搜索。

3. 它到哪里去？向量数据库的发展方向是支持更大规模的数据存储和更高效的检索与分析能力。它必须具备可扩展性，支持线性扩展，并且具有高可用性。此外，它还需要支持各种硬件加速技术，以提高计算能力。随着 AI 技术在业界应用变现的增长，例如人脸识别和检索等领域，向量数据库将会有更大的发展空间。


[Embeddings - OpenAI API](https://platform.openai.com/docs/guides/embeddings/what-are-embeddings)

## 它从哪里来

## 它是什么

### 算法
这段文字是关于向量数据库算法的介绍，它讲述了如何用随机投影的方法来降低数据的维度，从而提高搜索的效率和准确度。它还解释了随机投影的原理和优缺点。
#### 随机投影 Random Projection
随机投影的基本思想是利用一个随机投影矩阵，将高维向量投影到一个低维空间中。我们创建一个随机数矩阵。矩阵的大小是我们想要的目标低维值。然后，我们计算输入向量和矩阵的点积，得到一个投影矩阵，它的维度比我们原来的向量少，但仍然保持了它们的相似性。
![image.png](https://jgox-image-1316409677.cos.ap-guangzhou.myqcloud.com/blog/20230518113130.png)

当我们查询时，我们使用相同的投影矩阵将查询向量投影到低维空间中。然后，我们将投影后的查询向量与数据库中的投影向量进行比较，找到最近邻。由于数据的维度降低了，搜索过程比在整个高维空间中搜索要快得多。

只要记住，随机投影是一种近似方法，投影的质量取决于投影矩阵的性质。一般来说，投影矩阵越随机，投影的质量就越好。但是生成一个真正随机的投影矩阵可能会很耗费计算资源，特别是对于大型数据集。

#### 局部敏感哈希 Locality-sensitive hashing
局部敏感哈希（LSH）是一种在近似最近邻搜索中用于索引的技术。它优化了速度，同时仍然提供了一个近似的、非穷尽的结果。LSH 使用一组哈希函数，将相似的向量映射到“桶”中，如下图所示：
![image.png](https://jgox-image-1316409677.cos.ap-guangzhou.myqcloud.com/blog/20230518113622.png)

为了找到给定查询向量的最近邻，我们使用相同的哈希函数，将相似的向量“桶化”到哈希表中。查询向量被哈希到一个特定的表中，然后与该表中的其他向量进行比较，找到最接近的匹配。这种方法比在整个数据集中搜索要快得多，因为每个哈希表中的向量数量远远少于整个空间中的向量数量。

要记住的是，LSH是一种近似方法，而且近似的质量取决于哈希函数的性质。一般来说，使用的哈希函数越多，近似的质量就越好。但是，使用大量的哈希函数可能会很耗费计算资源，对于大型数据集可能不可行。

我的理解是，这段文字介绍了局部敏感哈希算法的原理和步骤。它说明了如何使用哈希函数将高维数据分组到不同的桶中，并在桶内进行相似性搜索。它还指出了局部敏感哈希算法的优点和局限性。


### 向量数据库具备一系列的能力
使它们更适合在高规模的生产环境中使用。让我们来看一下涉及到数据库操作的组件的总体概述。
![image.png](https://jgox-image-1316409677.cos.ap-guangzhou.myqcloud.com/blog/20230518114157.png)

#### 性能和容错性
性能和容错性是密切相关的。数据越多，就需要越多的节点 - 也就有更大的错误和故障的可能性。与其他类型的数据库一样，我们希望确保即使一些底层节点出现故障，查询也能尽快执行。这可能是由于硬件故障、网络故障或其他类型的技术错误造成的。这种故障可能导致停机或甚至错误的查询结果。

为了确保既有高性能又有容错性，向量数据库使用分片和复制来实现以下目标：

1.  分片 - 将数据分布在多个节点上。有不同的数据分区方法 - 例如，可以根据不同数据簇的相似性来分区数据，使得相似的向量存储在同一个分区中。当进行查询时，它被发送到所有的分片，并从中检索和合并结果。这被称为“散播-收集”模式。
2.  复制 - 在不同的节点上创建数据的多个副本。这确保了即使某个节点出现故障，其他节点也能够替代它。有两种主要的一致性模型：最终一致性和强一致性。最终一致性允许不同数据副本之间存在暂时的不一致，这可以提高可用性和降低延迟，但可能导致冲突甚至数据丢失。另一方面，强一致性要求在写操作被认为完成之前，所有数据副本都被更新。这种方法提供了更强的一致性，但可能导致更高的延迟。
#### 访问控制
访问控制是管理和规范用户访问数据和资源的过程。它是数据安全的重要组成部分，确保只有被授权的用户才能查看、修改或与向量数据库中存储的敏感数据进行交互。

#### 监控
要有效地管理和维护一个向量数据库，我们需要一个强大的监控系统，来跟踪数据库的性能、健康和整体状态的重要方面。监控对于发现潜在的问题、优化性能和确保顺畅的生产运营至关重要。监控一个向量数据库的一些方面包括以下几点：

1. 资源使用 - 监控资源使用，如 CPU、内存、磁盘空间和网络活动，可以发现可能影响数据库性能的潜在问题或资源限制。
2. 查询性能 - 查询延迟、吞吐量和错误率可能反映出需要解决的潜在的系统问题。
3. 系统健康 - 整体系统健康监控包括各个节点的状态、复制过程和其他关键组件。

#### API 和 SDK 
这是最关键的地方：与数据库交互的开发者希望能够使用一个易于使用的 API，使用一套熟悉和舒适的工具集。通过提供一个用户友好的接口，向量数据库 API 层简化了高性能向量搜索应用的开发。

除了API之外，向量数据库通常还会提供针对特定编程语言的SDK，它们封装了API。SDK使得开发者在他们的应用中与数据库交互更加容易。这让开发者可以专注于他们特定的用例，比如语义文本搜索、生成式问答、混合搜索、图像相似度搜索或产品推荐，而不必担心底层基础设施的复杂性。
## 它到哪里去
AI 幻觉


我们正身处人工智能的变革浪潮中。它正在改变着它所触及的每一个行业，带来了无限的创新可能 - 但它也伴随着新的挑战。对于那些涉及大型语言模型、生成式人工智能和语义搜索的应用程序，高效地处理数据比以往任何时候都更加紧迫和重要。
所有这些新的应用程序都依赖于向量嵌入，一种富含语义信息的数据表达方式，它让人工智能能够获得深刻的理解和持久的记忆，它们可以在执行复杂任务时借助这些记忆。嵌入是由人工智能模型（如大型语言模型）生成的，并拥有众多的属性或特征，使得它们的表达难以掌控。在人工智能和机器学习的背景下，这些特征代表了数据的不同维度，这些维度对于洞察模式、关联和内在结构是至关重要的。

有了向量数据库，我们就可以为我们的人工智能添加一些高级功能，比如语义信息检索、长期记忆等等。下面的图表让我们更好地理解向量数据库在这类应用中的作用：

我的理解是，这段文字介绍了向量数据库的一些优势和应用场景。它说明了向量数据库可以帮助人工智能处理复杂的数据和任务，提高效率和性能。它还提供了一个图表来说明向量数据库是如何与其他组件协作的。


向量嵌入在自然语言处理、计算机视觉和其他人工智能应用领域的指数增长，导致了向量数据库作为计算引擎的出现，它使我们能够在应用中有效地与向量嵌入进行交互。

向量数据库是专门设计的数据库，专门解决在生产场景中管理向量嵌入时遇到的问题。因此，它们比传统的基于标量的数据库和独立的向量索引具有显著的优势。

在这篇文章中，我们回顾了向量数据库的关键方面，包括它是如何工作的，它使用了什么算法，以及它具备了哪些额外的特性，使它能够为生产场景做好运行准备。我们希望这能帮助你理解向量数据库的内部工作原理。幸运的是，这不是你必须知道的才能使用Pinecone。Pinecone会处理所有这些考虑（甚至更多），让你可以专注于应用的其他部分。